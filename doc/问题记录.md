# swagger携带全局token和局部token

全局token: 

```java
@Configuration
public class SwaggerConfig() {
  
  @Bean
  // 开发测试环境生效
  @Profile({"dev", "text"})
  public Docket docker() {
    Docket docket = new Docket(DocumentationType.SWAGGER_2)
                .apiInfo(apiInfo())
                .enable(enableDoc)
                .select()
                // 扫描带ApiOperation注解的方法
                .apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class))
                .paths(PathSelectors.any())
                //过滤掉所有error或error.*页面
                .paths(Predicates.not(PathSelectors.regex("/error.*")))
                .build();
    
    return docket;
  }

  private List<ApiKey> securitySchemes(){
    return Arrays.asList(new ApiKey("Authorization", "Authorization", "header"));
  }

  private List<SecurityContext> securityContexts(){
    // 设置需要登录认证的路径
    List<SecurityContext> contexts = new ArrayList<>();
    contexts.add(getContextByPath("/*/.*"));
    return contexts;
  }

  private SecurityContext getContextByPath(String pathRegex) {
    return SecurityContext.builder()
      .securityReferences(defaultAuth())
      .forPaths(PathSelectors.regex(pathRegex))
      .build();
  }

  private List<SecurityReference> defaultAuth(){
    List<SecurityReference> references = new ArrayList<>();
    AuthorizationScope scope = new AuthorizationScope("global", "accessEveryThing");
    AuthorizationScope[] scopes = new AuthorizationScope[]{scope};
    references.add(new SecurityReference("Authorization", scopes));
    return references;
  }
}
```

局部token

```java
@Configuration
public class SwaggerConfig() {
  
  @Bean
  // 开发测试环境生效
  @Profile({"dev", "text"})
  public Docket docker() {
    Docket docket = new Docket(DocumentationType.SWAGGER_2)
                .apiInfo(apiInfo())
                .enable(enableDoc)
                .select()
                // 扫描带ApiOperation注解的方法
                .apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class))
                .paths(PathSelectors.any())
                //过滤掉所有error或error.*页面
                .paths(Predicates.not(PathSelectors.regex("/error.*")))
                .build();
    Parameter tokenParam = new ParameterBuilder().name("Authorization")
                    .parameterType("header")
                    .modelRef(new ModelRef("string"))
                    .description("token")
                    .build();
    docket.globalOperationParameters(Arrays.asList(tokenParam));
    return docket;
  }
}
```



